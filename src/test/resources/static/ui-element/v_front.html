<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>ATL - Modal </title>
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
</head>

<body class="hold-transition skin-blue sidebar-mini">
<v-app :data="data" >
    <!-- /.content-wrapper -->
    <v-box title="App配置界面">
        <v-form name="appName"  >
            <v-form-item span="9" label="首页url:">
                <input name="indexUrl" class="form-control"  v-model="indexUrl">
            </v-form-item>

            <v-form-item span="9" label="app名称:">
                <input name="appName" class="form-control" v-model="appName" >
            </v-form-item >

            <v-form-item span="9" label="用户姓名:">
                <input name="userName" class="form-control"  v-model="userName" >
            </v-form-item >

            <v-form-item span="9" label="用户图片url:">
                <input  name="userImgUrl"class="form-control" v-model="userImgUrl" >
            </v-form-item >

            <v-form-item span="9" label="用户详细信息url:">
                <input name="profileUrl" class="form-control" v-model="profileUrl" >
            </v-form-item >

            <v-form-item span="9" label="登出url:">
                <input name="signOutUrl" class="form-control" v-model="signOutUrl" >
            </v-form-item >

            <v-form-item span="9" label="logo名称:">
                <input name="logoName" class="form-control" v-model="logoName" >
            </v-form-item >

            <v-form-item span="9" label="logo名称简写:">
                <input  name="logoShortName" class="form-control" v-model="logoShortName" >
            </v-form-item >



            <v-form-item span="9" >
                <div class="box-footer"  >
                    <button type="submit" class="btn btn-primary" @click="saveData"  >保存修改</button>
                </div>
            </v-form-item >
        </v-form>
    </v-box>

          <v-modal title="Me" id="modal-default">
                <v-form>
                    <v-row>
                        <v-form-item v-if="appStatus === 1" label="上传成功">
                        </v-form-item>
                        <v-form-item v-else label="上传失败" ></v-form-item>
                    </v-row>
                </v-form>
                <button slot="footer">Save</button>
            </v-modal>




</v-app>
<script src="/lib/lib.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    app.main({

        data : function () {
            return {
                indexUrl:"",
                appName:"",
                userName:"",
                userImgUrl:"",
                profileUrl:"",
                signOutUrl:"",
                logoName:"",
                logoShortName:"",
                appStatus:1

            }
        } ,
        methods : {
            saveData:function(){
                var a,b,i;
                b=document.appFrom;
                a= document.forms[0];
                for (i=0;i<a.length;i++){
                    if(i===0 || i===3 || i===4 || i===5 ){
                        var index1=a[i]._value.lastIndexOf(".");
                        var index2=a[i]._value.length;
                        var suffix=a[i]._value.substring(index1+1,index2);//后缀名
                        if(suffix !== "html") {
                            this.appStatus= 0;
                            break;
                        }
            }
        }
        if(this.appStatus){
            a.method="post";
            a.action="/app_data";
            a.submit();
          //  alert("上传成功!")
        }else{
          // alert("请输入正确的URL");
        }

    }
        } ,
        mounted : function ($vm) {
            var self = $vm;
            axios({
                method:'get',
                url:'/get_app_data',
                responseType :'json'
            }).then(function (response) {
                self.indexUrl = response.data.indexUrl;
                self.appName = response.data.appName;
                self.userName = response.data.userName;
                self.userImgUrl = response.data.userImgUrl;
                self.profileUrl = response.data.profileUrl;
                self.signOutUrl = response.data.signOutUrl;
                self.logoName = response.data.logoName;
                self.logoShortName = response.data.logoShortName;

            })
        }
    });



</script>
</body>
